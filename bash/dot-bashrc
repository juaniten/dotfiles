# All the default Omarchy aliases and functions
# (don't mess with these directly, just overwrite them here!)
source ~/.local/share/omarchy/default/bash/rc

# Add your own exports, aliases, and functions here.
#
# Make an alias for invoking commands you use constantly
# alias p='python'

# Alias for bootstrapping arch with my dotfiles
alias bootstrap='ansible-playbook --ask-become-pass -i ~/.ansible-arch/inventory.ini ~/.ansible-arch/bootstrap.yml'

# Source keychain environment if it exists
if [ -f "$HOME/.keychain/$(hostname)-sh" ]; then
    . "$HOME/.keychain/$(hostname)-sh"
fi

# ------------- 
# Doofinder
# -------------

export XAUTHORITY="$HOME/.Xauthority"

# Base path for Doofinder projects
DOOFINDER_PATH="/home/juan/Work/doofinder"

# Functions for megascript commands
mega.pr() {
  "$DOOFINDER_PATH/dfcommon/bin/megascript" run pluginrangers -d "$@"
}

mega.init() {
  "$DOOFINDER_PATH/dfcommon/bin/megascript" init "$@"
}

mega.update() {
  "$DOOFINDER_PATH/dfcommon/bin/megascript" update "$@"
}

mega.restoredb() {
  "$DOOFINDER_PATH/dfcommon/bin/megascript" restoredb "$@"
}

mega.stop() {
  "$DOOFINDER_PATH/dfcommon/bin/megascript" stop "$@"
}

# Alias for frp client
function frp {
  BASEDIR="$DOOFINDER_PATH/frp"
  (
    cd "$BASEDIR" || return 1
    nohup "$BASEDIR/frpc" -c "$BASEDIR/frpc.toml" >/dev/null 2>&1 &
  )
}

# Useful docker combo
boom() {
  docker compose down -v
  docker compose up -d "$@"
  docker compose logs -f "$@"
}

# Cursor 
cursor() {
    (nohup /usr/bin/cursor --no-sandbox "$@" > /dev/null 2>&1 &)
}
